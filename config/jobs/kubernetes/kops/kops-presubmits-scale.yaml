# Test jobs generated by build_jobs.py (do not manually edit)
# 2 jobs
presubmits:
  kubernetes/kops:

# {"cloud": "aws", "distro": "u2204", "k8s_version": "stable", "kops_channel": "alpha", "networking": "amazonvpc"}
  - name: presubmit-kops-aws-scale-amazonvpc
    branches:
    - master
    always_run: false
    optional: false
    skip_report: false
    labels:
      preset-service-account: "true"
      preset-aws-ssh: "true"
      preset-aws-credential: "true"
      preset-dind-enabled: "true"
    max_concurrency: 1
    decorate: true
    decoration_config:
      timeout: 90m
    path_alias: k8s.io/kops
    extra_refs:
    - org: kubernetes
      repo: perf-tests
      base_ref: master
      path_alias: k8s.io/perf-tests
    spec:
      containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20230616-e730b60769-master
        imagePullPolicy: Always
        command:
        - runner.sh
        args:
        - ./tests/e2e/scenarios/scalability/run-test.sh
        securityContext:
          privileged: true
        env:
        - name: KUBE_SSH_KEY_PATH
          value: /etc/aws-ssh/aws-ssh-private
        - name: KUBE_SSH_USER
          value: ubuntu
        - name: GOPATH
          value: /home/prow/go
        - name: CLOUD_PROVIDER
          value: "aws"
        - name: CLUSTER_NAME
          value: "e2e-ed860ed5de-2df82.test-cncf-aws.k8s.io"
        - name: KOPS_STATE_STORE
          value: "s3://k8s-kops-prow"
        - name: KOPS_IRSA
          value: "true"
        resources:
          requests:
            cpu: "2"
            memory: "6Gi"
    annotations:
      test.kops.k8s.io/cloud: aws
      test.kops.k8s.io/distro: u2204
      test.kops.k8s.io/k8s_version: stable
      test.kops.k8s.io/kops_channel: alpha
      test.kops.k8s.io/networking: amazonvpc
      testgrid-dashboards: kops-presubmits, presubmits-kops, sig-cluster-lifecycle-kops
      testgrid-days-of-results: '90'
      testgrid-tab-name: presubmit-kops-aws-scale-amazonvpc

# {"cloud": "aws", "distro": "u2204", "k8s_version": "stable", "kops_channel": "alpha", "networking": "amazonvpc"}
  - name: presubmit-kops-aws-scale-amazonvpc-using-cl2
    branches:
    - master
    always_run: false
    optional: false
    skip_report: false
    labels:
      preset-service-account: "true"
      preset-aws-ssh: "true"
      preset-aws-credential: "true"
      preset-dind-enabled: "true"
    max_concurrency: 1
    decorate: true
    decoration_config:
      timeout: 90m
    path_alias: k8s.io/kops
    extra_refs:
    - org: kubernetes
      repo: perf-tests
      base_ref: master
      path_alias: k8s.io/perf-tests
    spec:
      containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20230616-e730b60769-master
        imagePullPolicy: Always
        command:
        - runner.sh
        args:
        - ./tests/e2e/scenarios/scalability/run-test.sh
        securityContext:
          privileged: true
        env:
        - name: KUBE_SSH_KEY_PATH
          value: /etc/aws-ssh/aws-ssh-private
        - name: KUBE_SSH_USER
          value: ubuntu
        - name: GOPATH
          value: /home/prow/go
        - name: ARTIFACTS
          value: $(ARTIFACTS)
        - name: RUN_CL2_TEST
          value: "true"
        - name: CL2_SCHEDULER_THROUGHPUT_THRESHOLD
          value: "25"
        - name: CLOUD_PROVIDER
          value: "aws"
        - name: CLUSTER_NAME
          value: "e2e-ff02749ef8-a423a.test-cncf-aws.k8s.io"
        - name: KOPS_STATE_STORE
          value: "s3://k8s-kops-prow"
        - name: KOPS_IRSA
          value: "true"
        resources:
          requests:
            cpu: "2"
            memory: "6Gi"
    annotations:
      test.kops.k8s.io/cloud: aws
      test.kops.k8s.io/distro: u2204
      test.kops.k8s.io/k8s_version: stable
      test.kops.k8s.io/kops_channel: alpha
      test.kops.k8s.io/networking: amazonvpc
      testgrid-dashboards: kops-presubmits, presubmits-kops, sig-cluster-lifecycle-kops
      testgrid-days-of-results: '90'
      testgrid-tab-name: presubmit-kops-aws-scale-amazonvpc-using-cl2
