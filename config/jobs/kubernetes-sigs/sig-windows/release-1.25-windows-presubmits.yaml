# generated by ./config/jobs/kubernetes-sigs/sig-windows/generate-presubmits.sh.
presubmits:
  kubernetes/kubernetes:
  - name: pull-kubernetes-e2e-capz-windows-containerd-1-25
    decorate: true
    always_run: false
    optional: true
    run_if_changed: 'azure.*\.go$|.*windows\.go$|test/e2e/windows/.*'
    path_alias: k8s.io/kubernetes
    branches:
      - release-1.25
    labels:
      preset-dind-enabled: "true"
      preset-kind-volume-mounts: "true"
      preset-azure-cred-only: "true"
      preset-azure-anonymous-pull: "true" # Sets REGISTRY which is needed when building CCM/CNM images
      preset-capz-windows-2019: "true"
      preset-capz-containerd-1-6-latest: "true"
      preset-capz-windows-common-pull: "true"
    extra_refs:
    - org: kubernetes-sigs
      repo: cluster-api-provider-azure
      # TODO: update to release-1.9 when Go 1.20 is backported to kubekins-e2e.
      base_ref: release-1.8
      path_alias: sigs.k8s.io/cluster-api-provider-azure
      workdir: true
    - org: kubernetes-sigs
      repo: cloud-provider-azure
      base_ref: release-1.25
      path_alias: sigs.k8s.io/cloud-provider-azure
    spec:
      containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20230616-e730b60769-1.25
        command:
        - runner.sh
        - ./scripts/ci-conformance.sh
        securityContext:
          privileged: true
        resources:
          requests:
            cpu: 2
            memory: "9Gi"
    annotations:
      testgrid-dashboards: sig-windows-presubmit
      testgrid-tab-name: pull-kubernetes-e2e-capz-windows-containerd-1.25
      testgrid-num-columns-recent: '30'
